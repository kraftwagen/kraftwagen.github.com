<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Kraftwagen - Get started</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kraftwagen is a set of Drupal Tools for a everything in code and install profile / drush make based workflow.">
    <meta name="author" content="Rolf van de Krol">

    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/prettify.css" rel="stylesheet">

    <link href="/css/kraftwagen.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body data-spy="scroll" data-target=".kw-sidebar">
    <header class="get-started">
      <div class="container">
        <h1>Get your Kraftwagen started!</h1>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span4 kw-sidebar">
          <div class="kw-sidebar-inner">
            <ul class="nav nav-list kw-sidenav">
              <li><a href="#installation"><i class="icon-download-alt"></i> Get it</a></li>
              <li><a href="#new-project"><i class="icon-plus-sign"></i> New project</a></li>
              <li><a href="#setup-project"><i class="icon-bolt"></i> Setting up projects</a></li>
              <li><a href="#build"><i class="icon-magic"></i> Creating a build</a></li>
            </ul>
          </div>
        </div>

        <div class="span8">
          <p>
            This tutorial is aimed at software developers that are familiar with
            Drupal and not afraid of a little command line.
          </p>
          <section id="installation">
            <div class="page-header">
              <h2>Installation</h2>
            </div>
            <p>
              First make sure to have <a href="http://drupal.org/project/drush">Drush
              installed</a>. Kraftwagen builds it's command line interface on Drush.
            </p>
            <p>
              Go to the directory where Drush expects extensions &mdash; on Unix/OSX
              this is usually <code>~/.drush</code> &mdash; and clone the Kraftwagen
              Drush extension from GitHub:
<pre class="prettyprint lang-bash">cd ~/.drush
git clone git@github.com:kraftwagen/kraftwagen.git
</pre>
              You can keep your Kraftwagen up-to-date by doing a <code>git pull</code>
              from its directory.
            </p>
            <p>
              If you have no idea what GitHub and Drush are then Kraftwagen is
              probably not for you... Sorry.
            </p>

            <h3>Per project</h3>
            <p>
              We maintain a <a href="https://github.com/kraftwagen/tools">tool
              to install Drush and Kraftwagen local to your project</a>. Apart
              from this link we consider it beyond the scope of this tutorial.
            </p>
          </section>

          <section id="new-project">
            <div class="page-header">
              <h2>Create a new project</h2>
            </div>

            <p>
<pre class="prettyprint lang-bash">
cd ~
mkdir example_project
cd example_project
drush kw-new-project</pre>
              The <code>kw-new-project</code> command will ask some questions &mdash;
              a the project name (both human and machine) and the location of a
              <em>skeleton repository</em> &mdash; after which it will use a clone the
              <em>skeleton repository</em> to generate your project files in
              <code>~/example_project/src</code>.
            </p>
            <p>
              We maintain an <a href="https://github.com/kraftwagen/skeleton">basic
              skeleton repository</a> on GitHub from which you can use (simply fork to
              create your own <em>skeletons</em>).
            </p>

            <p>
              Now the source of the project is created in <code>src</code>, this is the
              direcorry that you would usually want under version crontrol.
            </p>

            <p>
              The source of a Kraftwagen project is a
              <a href="http://drupal.org/developing/distributions">Drupal install
              profile</a>. Both Drupal core and contributed modules are pulled in
              using Drush' own <code>make</code> command and some <code>.make</code>
              files. This way <em>your</em> repository only contains <em>YOUR</em> code.
            </p>

            <p>
              If you have an existing Kraftwagen project under version control you
              simply create a directory for that project, change to it, and
              clone/checkout the source code into <code>src</code>.
            </p>
          </section>

          <section id="setup-project">
            <div class="page-header">
              <h2>Adding Kraftwagen to existing Drupal projects</h2>
            </div>

            <p id="setup-project-sub">
<pre class="prettyprint lang-bash">
cd ~/example_project
drush kw-setup</pre>
              This will creates the <code>cnf</code> directory with the following
              files and directories in it:
            </p>

            <dl>
              <dt><code>settings.php</code> and <code>settings.local.php</code></dt>
              <dd>
                The settings files are copied from the <code>src/cnf</code>
                directory. These files contain target-specific settings for your
                Drupal installation. Later, when building an actual Drupal
                installation, these files are symlinked into it.
              </dd>
              <dt><code>environment</code></dt>
              <dd>
                This file by default contains one word <code>production</code>,
                it is used to determain which environment we currently run in.
              </dd>
              <dt><code>files</code></dt>
              <dd>
                The <code>files</code> directory is used to store user uploads.
                A this point it is empty. Later, when building an actual Drupal
                installation, it is symlinked into it.
              </dd>
            </dl>
            <p>

            <p>
              You should change the <code>settings.local.php</code> file to be
              able to connect to the database. Furthermore, if you want to use
              the development settings, change the contents of the
              <code>enviroment</code> file to <code>development</code>.
            </p>

            <p>
              You're now ready to <a href="#build">build</a> your first Kraftwagen
              managed Drupal installation.
            </p>
          </section>

          <section id="build">
            <div class="page-header">
              <h2>Building</h2>
            </div>

            <p>
              The source of the project is not a working Drupal installation. It
              doesn't even contain Drupal itself. It needs to be <em>build</em>.
            </p>
            
<pre class="prettyprint lang-bash">
cd ~/example_project
drush kw-build</pre>
            
            <p>
              By default the build is created in the <code>build</code> directory.
              If you prefer to keep a directory of all builds and prefer
              <code>build</code> to be a symlink to the current build simply create
              a directory called <code>builds</code> (with an "s"), and Kraftwagen will
              automatically create the build in there and update a symlink from 
              <code>build</code> to the directory of the latest build for you.
            </p>
            <p>
              The <code>build</code> is usually where you want to point your webserver at.
              Enjoy the ride with Kraftwagen... Any questions or remarks: find us on
              <a href="https://github.com/kraftwagen">GitHub</a>!
            </p>
          </section>
        </div>
      </div>

      <hr>
      <footer>
        <p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a></p>
      </footer>

    </div>

    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="/js/bootstrap.js"></script>
    <script src="/js/prettify.js"></script>
    <script src="/js/app.js"></script>
    <script type="text/javascript">var _gaq = [['_setAccount', 'UA-36687951-1'], ['_trackPageview']];</script>
    <script type="text/javascript" src="http://www.google-analytics.com/ga.js"></script>
  </body>
</html>
